root /app/.output/public;

autoindex off;
port_in_redirect off;
expires off;

include mime.types;
types {
  application/manifest+json  webmanifest;
}
try_files $uri $uri/ /index.html =404;

location ^~ /_nuxt/ {
    add_header Cache-Control "public, max-age=31536000, s-maxage=31536000, immutable";
    try_files $uri =404;
}

location /politique-confidentialite {

}

location / {
  
  <% if ENV['NGINX_PASSWORD'] %>
  auth_basic           "Protected Site User: <%= ENV['NGINX_USER'] %>";
  auth_basic_user_file "/app/config/htpasswd";
  <% end %>
}
